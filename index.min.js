!function(){"use strict";var n=function(n,r){return void 0===r&&(r=!0),"object"==typeof n&&(!r||function(n,r){return n&&t(r)&&n instanceof r}(n,Object))},t=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},r=function(n){return n.length},e=function t(r){if(function(n){return Array.isArray(n)}(r))return r.map((function(n){return t(r)}));if(n(r)){for(var e in r)r[e]=t(r[e]);return r}return!1===r?"false":null===r?"null":!0===r?"true":""+r},u=document,i=window,o=function(n,t){for(var r,e=n.attributes,u={},i=0,o=e.length;i<o;++i)r=e[i].value,u[e[i].name]=r;return u},f=function(n,t){return(t||u).querySelector(n)},c=function(n,t){return u.querySelectorAll(n)},a=function(n,t){void 0===t&&(t=!0);var r="innerHTML";if(!v(n,r))return!1;var e=n[r];return""!==(e=t?e.trim():e)?e:null},l=function(n,t){return n.closest(t)||null},v=function(n,t){return t in n},s=function(n,t){return n.removeAttribute(t),n},h=function(n,t,r){return!0===r&&(r=t),n.setAttribute(t,e(r)),n},m=function(n,t){var r;for(var e in t)(r=t[e])||""===r||0===r?h(n,e,r):s(n,e);return n},d=function(n,t,r){if(void 0===r&&(r=!0),null===t)return n;var e="innerHTML";return v(n,e)&&(n[e]=r?t.trim():t),n},p=i.history,g=function(n){return n&&n.preventDefault()},y=function(n,t,r,e){void 0===e&&(e=!1),t.addEventListener(n,r,e)};function b(n){y("click",n,(function(n){var t=l(this,".content\\:field,.lot\\:field");if(t){var r,e=f("input[name]",t),u=e.name,c=e.form.token;i.fetch(r=this.href).then((function(n){return n.text()})).then((function(n){var e=(new DOMParser).parseFromString(n,"text/html"),i=e.forms.set[u],f=e.forms.set.token,v=l(i,".content\\:field,.lot\\:field");v&&(m(t,o(v)),d(t,a(v))),f&&(c.value=f.value),p.pushState({},"",r),A()})),g(n)}}))}function A(){var n=c('.description a:where([href*="?image="],[href*="&image="])');r(n)&&n.forEach(b)}A(),_.on("change",A)}();